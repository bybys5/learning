<!DOCTYPE html>
<html>
	<head>
		<title>TODO supply a title</title>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width">
		<link rel="stylesheet" type="text/css" href="../../libs/qtips/jquery.qtip.min.css">
		<script type="text/javascript" src="../../libs/sea-modules/jquery.min.js"></script>
		<script type="text/javascript" src="../../libs/layer/layer.js"></script>
		<script type="text/javascript" src="../../libs/qtips/jquery.qtip.min.js"></script>
		<script type="text/javascript" src="../../js/common/common.js"></script>
		<script type="text/javascript" src="../../libs/avalon1.5.8.js"></script>
		<script>
			var model = avalon.define({
				$id: "test",
				data: [{checked: false}, {checked: false}, {checked: false}],
				allChecked: false,
				checkAll: function() {
					var bool = this.checked;
					model.data.forEach(function(el) {
						el.checked = bool;
					});
				},
				checkOne: function() {
					console.log(this);
					console.log($(this).attr('index'));

					if (!this.checked) {
						model.allChecked = false;
					} else {
						model.allChecked = model.data.every(function(el) {
							return el.checked;
						});
					}
				}
			});

			console.log(COMMON.time.str2timestamp('2016 12 11 23:23:12'));
			console.log(COMMON.time.timestamp2str('1481469792000', 'yyyyMMdd'));
		</script>
	</head>
	<body>
		<table ms-controller="test" border="1">
			<tr>
				<td><input type="checkbox" ms-duplex-checked="allChecked" data-duplex-changed="checkAll"/>全选</td>
			</tr>
			<tr ms-repeat="data">
				<td><input type="checkbox"  ms-duplex-checked="el.checked" ms-attr-index=$index data-duplex-changed="checkOne"/>xxxxxxxxxxxx</td>
			</tr>
		</table>
	</body>
</html>
